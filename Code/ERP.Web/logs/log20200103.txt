2020-01-03 19:14:57,990 [1164] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:14:58,085 [1164] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:14:58,099 [1164] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:14:58,116 [1164] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:14:58,126 [1164] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:14:58,138 [1164] DEBUG Erp - 
--set ANSI_NULLS ON
--set QUOTED_IDENTIFIER ON
 
-- =============================================
-- Description:	提供中文首字母
-- Demo: select * from 表 where fun_getPY(字段) like N'%zgr%'
-- =============================================
CREATE FUNCTION [dbo].[fun_getPY]
(
	@str NVARCHAR(4000)
)
RETURNS NVARCHAR(4000)
AS
BEGIN
	DECLARE @word NCHAR(1),@PY NVARCHAR(4000)
	SET @PY=''
	WHILE len(@str)>0
	BEGIN
		SET @word=left(@str,1)
		SET @PY=@PY+(CASE WHEN unicode(@word) BETWEEN 19968 AND 19968+20901
		THEN (SELECT TOP 1 PY FROM (
		SELECT 'A' AS PY,N'' AS word
		UNION ALL SELECT 'B',N'簿'
		UNION ALL SELECT 'C',N'e'
		UNION ALL SELECT 'D',N'z'
		UNION ALL SELECT 'E',N''
		UNION ALL SELECT 'F',N'v'
		UNION ALL SELECT 'G',N'B'
		UNION ALL SELECT 'H',N''
		UNION ALL SELECT 'J',N'h'
		UNION ALL SELECT 'K',N'i'
		UNION ALL SELECT 'L',N'w'
		UNION ALL SELECT 'M',N''
		UNION ALL SELECT 'N',N''
		UNION ALL SELECT 'O',N'a'
		UNION ALL SELECT 'P',N'曝'
		UNION ALL SELECT 'Q',N''
		UNION ALL SELECT 'R',N'U'
		UNION ALL SELECT 'S',N'R'
		UNION ALL SELECT 'T',N'X'
		UNION ALL SELECT 'W',N'F'
		UNION ALL SELECT 'X',N'R'
		UNION ALL SELECT 'Y',N''
		UNION ALL SELECT 'Z',N''
		) T 
		WHERE word>=@word COLLATE Chinese_PRC_CS_AS_KS_WS 
		ORDER BY PY ASC) ELSE @word END)
		SET @str=right(@str,len(@str)-1)
	END
	RETURN @PY
END
2020-01-03 19:14:58,152 [1164] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:15:28,548 [9232] DEBUG Servicesys_user - 获取实体对象
2020-01-03 19:15:28,580 [9232] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'admin'and Password =  '1234'and IsEnable =  'True'
2020-01-03 19:15:28,758 [9232] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2020-01-03 19:15:28,867 [9232] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','4S6DBKLDWJUEQVW','localhost','上海市','2020/1/3 19:15:28')
2020-01-03 19:15:28,882 [9232] DEBUG Servicemms_project - 获取实体对象
2020-01-03 19:15:28,882 [9232] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2020-01-03 19:15:28,989 [9240] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2020-01-03 19:15:32,979 [2720] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 19:16:18,216 [9404] DEBUG Servicesys_user - 获取实体对象
2020-01-03 19:16:18,231 [9404] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2020-01-03 19:16:18,231 [9404] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2020-01-03 19:16:18,231 [9404] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','4S6DBKLDWJUEQVW','localhost','上海市','2020/1/3 19:16:18')
2020-01-03 19:16:18,231 [9404] DEBUG Servicemms_project - 获取实体对象
2020-01-03 19:16:18,231 [9404] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2020-01-03 19:16:18,292 [9240] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 19:16:18,586 [2720] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 19:16:23,861 [2720] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2020-01-03 19:20:00,131 [2480] DEBUG Erp - SELECT Name as TableName FROM sys.tables order by Name
2020-01-03 19:20:00,161 [9240] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2020-01-03 19:20:02,313 [7268] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 19:20:26,841 [6224] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 19:20:26,879 [6176] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 19:20:56,286 [9372] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 19:20:56,293 [9372] DEBUG Erp - sp_pkeys 'base_material'
2020-01-03 19:23:09,191 [7248] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:23:09,224 [7248] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:23:09,233 [7248] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:23:09,233 [7248] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:23:09,240 [7248] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:23:09,241 [7248] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:23:09,681 [7268] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:23:15,042 [9232] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:23:15,058 [9232] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:29:50,890 [8436] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:29:51,868 [9284] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:29:51,878 [9284] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:30:39,159 [6176] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:30:41,278 [636] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:30:41,278 [636] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:30:45,833 [6532] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:30:46,321 [9748] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:30:46,322 [9748] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:31:01,126 [7436] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:31:01,532 [636] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:31:01,532 [636] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:31:02,397 [9284] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:31:02,634 [8272] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:31:02,634 [8272] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:31:40,157 [8272] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:31:41,728 [8436] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:31:41,729 [8436] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:31:57,823 [6176] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:31:58,655 [636] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:31:58,655 [636] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:34:28,741 [8580] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:34:29,778 [636] DEBUG Servicebase_material - 获取动态列表
2020-01-03 19:34:29,778 [636] DEBUG Erp - select base_material.* from base_material order by type
2020-01-03 19:34:59,197 [5408] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:34:59,211 [5408] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:34:59,215 [5408] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:34:59,215 [5408] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:34:59,219 [5408] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:34:59,219 [5408] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:34:59,558 [10008] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 19:35:01,867 [6728] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 19:35:15,883 [8332] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:35:34,564 [8420] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:35:34,595 [8420] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:39:14,985 [9768] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:39:19,609 [4612] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:39:19,609 [4612] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:41:06,827 [4612] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:41:06,827 [4612] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:41:31,262 [5072] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:41:34,622 [9768] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:41:34,623 [9768] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:42:46,390 [8420] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:42:48,936 [9896] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:42:48,936 [9896] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:43:07,828 [8320] DEBUG Mms - select max(MaterialCode) 
from mms_material 
where MaterialType='1'
2020-01-03 19:43:33,152 [6004] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:44:01,657 [5228] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:44:01,657 [5228] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:45:14,624 [1912] DEBUG Mms - select max(MaterialCode) 
from mms_material 
where MaterialType='1'
2020-01-03 19:45:42,444 [6600] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:45:48,383 [1912] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:45:48,384 [1912] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:46:06,382 [8544] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:46:15,019 [2020] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:46:15,019 [2020] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:50:24,214 [8580] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:50:24,226 [8580] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:50:24,231 [8580] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:50:24,231 [8580] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:50:24,234 [8580] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:50:24,234 [8580] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:50:25,018 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:50:30,751 [8956] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:50:30,766 [8956] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:50:39,505 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:50:39,896 [8956] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:50:39,896 [8956] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:50:46,563 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:50:47,088 [8128] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:50:47,088 [8128] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:50:48,961 [5456] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:50:49,478 [9596] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:50:49,479 [9596] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:51:07,781 [8128] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:51:09,965 [9452] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:51:09,965 [9452] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:51:27,374 [3748] DEBUG Erp - select max(id) 
from base_material 
where MaterialType='1'
2020-01-03 19:51:27,411 [3748] ERROR /api/erp/material/getnewcode/1 - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialType' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 ERP.Web.Models.base_materialService.GetNewMaterialCode(String ParentCode) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Models\base_materialService.cs:行号 15
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.GetNewCode(String id) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 55
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:dcfdc78d-01a5-4d0e-84ef-bce4a9947a08
Error Number:207,State:1,Class:16
2020-01-03 19:51:43,287 [1348] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:51:43,615 [3748] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:51:43,616 [3748] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:51:56,855 [3748] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:51:57,584 [5456] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:51:57,585 [5456] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:52:05,412 [9452] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:52:06,181 [3748] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:52:06,181 [3748] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:52:39,686 [5456] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:52:41,671 [8128] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:52:41,672 [8128] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:52:55,728 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:52:57,400 [10000] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:52:57,401 [10000] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:53:14,228 [9596] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:53:14,649 [5456] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:53:14,649 [5456] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:53:32,091 [5456] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:53:34,390 [8128] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:53:34,391 [8128] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:54:02,495 [9596] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:54:03,528 [3748] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:54:03,528 [3748] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:54:14,693 [3748] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 19:54:18,341 [5456] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 19:54:53,187 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 19:54:53,714 [3748] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:54:53,714 [3748] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:54:53,939 [8292] DEBUG Servicebase_material - 获取实体列表
2020-01-03 19:54:53,941 [8292] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 19:54:53,943 [8292] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:dcfdc78d-01a5-4d0e-84ef-bce4a9947a08
Error Number:207,State:1,Class:16
2020-01-03 19:54:53,966 [8292] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:dcfdc78d-01a5-4d0e-84ef-bce4a9947a08
Error Number:207,State:1,Class:16
2020-01-03 19:54:58,423 [1348] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:54:59,124 [10000] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:54:59,125 [10000] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:56:07,247 [8292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:56:08,009 [8956] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:56:08,009 [8956] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:56:11,083 [10000] DEBUG Erp - select max(id) 
from base_material 
where MaterialType='2'
2020-01-03 19:56:11,108 [10000] ERROR /api/erp/material/getnewcode/2 - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialType' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 ERP.Web.Models.base_materialService.GetNewMaterialCode(String ParentCode) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Models\base_materialService.cs:行号 15
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.GetNewCode(String id) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 55
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:dcfdc78d-01a5-4d0e-84ef-bce4a9947a08
Error Number:207,State:1,Class:16
2020-01-03 19:56:30,297 [8128] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:56:30,900 [8292] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:56:30,901 [8292] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:56:32,984 [8956] DEBUG Erp - select max(id) 
from base_material 
where MaterialType='2'
2020-01-03 19:56:33,008 [8956] ERROR /api/erp/material/getnewcode/2 - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialType' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 ERP.Web.Models.base_materialService.GetNewMaterialCode(String ParentCode) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Models\base_materialService.cs:行号 15
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.GetNewCode(String id) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 55
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:dcfdc78d-01a5-4d0e-84ef-bce4a9947a08
Error Number:207,State:1,Class:16
2020-01-03 19:56:40,840 [8956] DEBUG Erp - select max(id) 
from base_material 
where MaterialType='2'
2020-01-03 19:56:40,873 [8956] ERROR /api/erp/material/getnewcode/2 - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialType' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 ERP.Web.Models.base_materialService.GetNewMaterialCode(String ParentCode) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Models\base_materialService.cs:行号 15
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.GetNewCode(String id) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 55
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:dcfdc78d-01a5-4d0e-84ef-bce4a9947a08
Error Number:207,State:1,Class:16
2020-01-03 19:57:28,397 [4312] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:57:28,433 [4312] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:57:28,443 [4312] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:57:28,444 [4312] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:57:28,453 [4312] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:57:28,454 [4312] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 19:57:29,243 [9596] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 19:57:33,519 [6632] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 19:57:37,291 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:57:38,983 [5456] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:57:38,999 [5456] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:57:40,665 [1348] DEBUG Erp - select max(id) from base_material 
2020-01-03 19:57:56,525 [8292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 19:57:57,255 [7668] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:57:57,255 [7668] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:58:13,404 [9588] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 19:58:14,324 [8040] DEBUG Servicebase_data - 获取动态列表
2020-01-03 19:58:14,324 [8040] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 19:58:14,354 [10000] DEBUG Servicebase_material - 获取实体列表
2020-01-03 19:58:14,357 [10000] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 19:58:14,368 [10000] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 19:58:14,441 [10000] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:00:22,562 [10000] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:01:13,397 [8040] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:01:16,305 [9596] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:01:16,305 [9596] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:01:19,602 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:01:22,712 [10000] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:01:22,712 [10000] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:01:35,294 [9596] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:01:38,834 [7952] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:01:38,835 [7952] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:01:55,090 [10000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:02:00,395 [7952] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:02:00,396 [7952] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:02:09,697 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:02:09,876 [8292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:02:10,418 [10000] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:02:10,418 [10000] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:02:10,595 [8040] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:02:10,595 [8040] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:02:10,599 [8040] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:10,610 [8040] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:13,741 [8292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:02:14,148 [9596] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:02:14,150 [9596] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:02:14,155 [9596] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:14,167 [9596] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:14,182 [8040] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:02:14,182 [8040] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:02:15,150 [8292] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:02:15,150 [8292] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:02:15,152 [8292] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:15,160 [8292] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:16,831 [7952] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:02:17,490 [9588] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:02:18,406 [10000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:02:19,340 [8292] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:02:19,341 [8292] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:02:19,456 [8128] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:02:19,456 [8128] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:02:19,457 [8128] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:19,467 [8128] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:20,974 [9852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:02:21,365 [9596] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:02:21,365 [9596] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:02:21,540 [8956] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:02:21,540 [8956] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:02:21,543 [8956] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:21,595 [8956] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:23,989 [8292] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:02:23,990 [8292] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:02:23,992 [8292] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:02:24,009 [8292] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:03:07,268 [9852] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:03:08,035 [5300] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:03:08,987 [7920] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:03:18,619 [10000] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:03:18,620 [10000] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:03:18,622 [10000] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:03:18,635 [10000] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:03:18,650 [8128] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:03:18,651 [8128] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:03:41,634 [2716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:03:47,265 [7952] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:03:47,265 [7952] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:03:54,523 [2716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:04:00,506 [9852] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:04:00,507 [9852] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:04:04,414 [2716] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:04:04,912 [5300] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:04:06,163 [8040] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:04:06,762 [8128] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:04:06,762 [8128] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:04:06,903 [8292] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:04:06,903 [8292] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:04:06,905 [8292] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:06,915 [8292] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:07,930 [7920] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:04:07,930 [7920] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:04:07,932 [7920] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:07,939 [7920] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:09,075 [5148] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:04:37,539 [5148] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:04:38,159 [9852] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:04:39,100 [7952] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:04:41,054 [7952] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:04:41,054 [7952] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:04:41,056 [7952] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:41,065 [7952] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:41,068 [9852] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:04:41,068 [9852] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:04:42,825 [9588] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:04:42,826 [9588] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:04:42,828 [9588] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:42,856 [9588] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:04:43,391 [7920] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:05:05,964 [2716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:05:11,023 [5148] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:05:11,024 [5148] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:05:15,329 [9852] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:05:15,330 [9852] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:05:15,431 [9852] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:15,449 [9852] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:17,543 [5300] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:05:17,543 [5300] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:05:17,545 [5300] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:17,560 [5300] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:19,447 [8128] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:05:24,811 [2716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:05:25,844 [5300] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:05:25,845 [5300] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:05:25,873 [7920] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:05:25,873 [7920] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:05:25,875 [7920] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:25,898 [7920] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:27,584 [10000] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:05:27,585 [10000] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:05:27,588 [10000] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:27,604 [10000] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:05:28,445 [8128] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:07:02,189 [5300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:07:02,751 [2716] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:07:02,751 [2716] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:07:02,904 [9596] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:07:02,905 [9596] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:07:02,906 [9596] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:07:02,927 [9596] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:07:04,247 [5300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:07:05,159 [2716] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:07:05,160 [2716] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:07:05,193 [5148] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:07:05,193 [5148] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:07:05,195 [5148] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:07:05,225 [5148] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:07:06,628 [8956] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:07:06,629 [8956] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:07:06,631 [8956] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:07:06,649 [8956] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:07:07,537 [9588] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:08:01,055 [8128] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:08:02,325 [5148] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:08:03,228 [5300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:08:04,572 [9852] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:08:04,572 [9852] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:08:04,573 [9852] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:08:04,581 [9852] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:08:04,585 [7952] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:08:04,586 [7952] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:08:05,811 [9588] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:08:05,811 [9588] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:08:05,818 [9588] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:08:05,836 [9588] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:08:06,446 [5300] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:09:14,542 [2716] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:09:15,374 [8128] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:09:16,466 [9852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:09:18,142 [8292] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:09:18,143 [8292] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:09:18,174 [9596] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:09:18,174 [9596] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:09:18,175 [9596] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:09:18,184 [9596] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:09:36,811 [8128] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:09:36,811 [8128] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:09:36,814 [8128] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:09:36,841 [8128] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:207,State:1,Class:16
2020-01-03 20:09:37,444 [10000] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:09:59,128 [7952] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:09:59,154 [7952] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:09:59,162 [7952] DEBUG Erp - select mms_material.* from mms_material where  MaterialCode =  ''
2020-01-03 20:09:59,166 [7952] ERROR Servicebase_material - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 对象名 'mms_material' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass47_0.<GetDynamic>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:208,State:1,Class:16
2020-01-03 20:09:59,168 [7952] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 对象名 'mms_material' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 115
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:208,State:1,Class:16
2020-01-03 20:09:59,184 [7952] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 对象名 'mms_material' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 70
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b2bbbd95-0755-40f8-885e-f90837a900f3
Error Number:208,State:1,Class:16
2020-01-03 20:12:13,614 [2836] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:12:13,646 [2836] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:12:13,652 [2836] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:12:13,653 [2836] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:12:13,659 [2836] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:12:13,660 [2836] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:12:14,161 [10000] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:12:19,300 [7952] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:12:19,327 [7952] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:12:22,614 [8292] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:12:27,412 [7952] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:12:31,522 [8128] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:12:32,061 [8292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:12:32,483 [7952] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:12:32,483 [7952] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:12:32,514 [9852] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:12:32,515 [9852] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:12:32,518 [9852] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:12:32,562 [9852] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:12:36,444 [8292] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:12:36,445 [8292] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:12:36,447 [8292] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:12:36,466 [8292] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:12:37,014 [10000] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:12:46,555 [8780] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:13:00,111 [7952] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:13:03,608 [8292] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:13:03,642 [8292] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:13:03,650 [8292] DEBUG Erp - select base_material.* from base_material where  no =  '201'
2020-01-03 20:13:03,683 [8292] DEBUG Erp - insert into base_material([type],[no],[name],[price],[guige],[isenable],[remark]) values('2','201','111','2','333','1','111111')
2020-01-03 20:13:03,692 [8292] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'create_username'，表 'Zephyr.Erp.dbo.base_material'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:515,State:2,Class:16
2020-01-03 20:13:03,709 [8292] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'create_username'，表 'Zephyr.Erp.dbo.base_material'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 70
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:515,State:2,Class:16
2020-01-03 20:13:34,072 [8780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:13:34,697 [9852] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:13:34,697 [9852] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:13:34,955 [7952] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:13:34,955 [7952] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:13:34,959 [7952] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:13:34,975 [7952] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:13:39,982 [2716] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:13:39,982 [2716] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:13:39,985 [2716] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:13:40,003 [2716] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:13:41,054 [8128] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:13:48,067 [9452] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:13:48,068 [9452] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:13:48,100 [9452] DEBUG Erp - select base_material.* from base_material where  no =  '201'
2020-01-03 20:13:48,102 [9452] DEBUG Erp - insert into base_material([type],[no],[name],[price],[guige],[isenable],[remark]) values('2','201','11','22','3','1','222')
2020-01-03 20:13:48,107 [9452] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'create_username'，表 'Zephyr.Erp.dbo.base_material'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:515,State:2,Class:16
2020-01-03 20:13:48,120 [9452] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'create_username'，表 'Zephyr.Erp.dbo.base_material'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 70
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:515,State:2,Class:16
2020-01-03 20:14:06,755 [9852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/material/Index','/Mms/material')
2020-01-03 20:14:08,925 [7920] DEBUG Servicemms_material - 获取实体列表
2020-01-03 20:14:08,925 [7920] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2020-01-03 20:14:08,928 [9452] DEBUG Servicemms_materialType - 获取动态列表
2020-01-03 20:14:08,939 [9452] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2020-01-03 20:14:08,979 [7920] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2020-01-03 20:14:22,263 [7920] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2020-01-03 20:14:22,280 [7920] DEBUG Servicesys_organize - 获取实体列表
2020-01-03 20:14:22,281 [7920] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-03 20:14:24,657 [8780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-03 20:14:26,821 [7952] DEBUG Servicesys_user - 获取实体列表
2020-01-03 20:14:26,823 [7952] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-03 20:14:26,824 [2716] DEBUG Servicesys_organize - 获取实体列表
2020-01-03 20:14:26,834 [2716] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-03 20:14:26,866 [7952] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-03 20:16:07,952 [8780] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:16:08,231 [8292] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:16:09,070 [7920] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:16:10,646 [9852] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:16:10,647 [9852] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:16:10,704 [9040] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:16:10,704 [9040] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:16:10,727 [9040] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:16:10,737 [9040] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:16:13,144 [7920] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:16:13,145 [7920] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:16:13,147 [7920] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:16:13,164 [7920] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e3898dc0-81be-42bd-bbe7-3a9582185c55
Error Number:207,State:1,Class:16
2020-01-03 20:16:13,663 [6104] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:33:19,146 [7248] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:33:19,167 [7248] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:33:19,173 [7248] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:33:19,173 [7248] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:33:19,178 [7248] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:33:19,179 [7248] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:33:19,674 [9984] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:33:24,868 [8816] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:33:31,994 [8780] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:33:32,287 [9984] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:33:35,953 [6104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:33:37,819 [8780] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:33:37,835 [8780] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:33:38,011 [9984] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:33:38,013 [9984] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:33:38,017 [9984] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:207,State:1,Class:16
2020-01-03 20:33:38,068 [9984] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:207,State:1,Class:16
2020-01-03 20:33:38,789 [7640] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:33:38,789 [7640] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:33:38,792 [7640] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:207,State:1,Class:16
2020-01-03 20:33:38,810 [7640] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:207,State:1,Class:16
2020-01-03 20:33:39,590 [10436] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:33:58,064 [10824] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:33:58,085 [10824] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:33:58,090 [10824] DEBUG Erp - select base_material.* from base_material where  no =  '201'
2020-01-03 20:33:58,114 [10824] DEBUG Erp - insert into base_material([type],[no],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('2','201','胶带','1.25','10*10','true','123','超级管理员','2020/1/3 20:33:58')
2020-01-03 20:34:10,048 [8780] DEBUG Erp - select max(id) from base_material 
2020-01-03 20:34:58,560 [10436] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:34:58,561 [10436] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:34:58,574 [10436] DEBUG Erp - select base_material.* from base_material where  no =  '201'
2020-01-03 20:34:58,595 [10436] DEBUG Erp - insert into base_material([type],[no],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('2','201','11','22','33','false','44','超级管理员','2020/1/3 20:34:58')
2020-01-03 20:35:05,007 [9984] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:35:05,750 [7968] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:35:05,750 [7968] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:35:05,782 [10436] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:05,783 [10436] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:35:05,785 [10436] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:05,806 [10436] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:07,950 [10824] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:07,950 [10824] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:35:07,953 [10824] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:07,969 [10824] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:08,827 [7640] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:08,827 [7640] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:35:08,829 [7640] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:08,847 [7640] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:10,346 [7532] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:10,346 [7532] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:35:10,348 [7532] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:10,369 [7532] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:11,196 [8956] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:11,196 [8956] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:35:11,199 [8956] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:11,215 [8956] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fb95c10a-5891-442a-adc7-2bb1edc40eae
Error Number:207,State:1,Class:16
2020-01-03 20:35:27,034 [8956] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:27,034 [8956] DEBUG Erp - select top 20 base_material.* from base_material order by no asc
2020-01-03 20:35:27,067 [8956] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:35:37,223 [6104] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:37,224 [6104] DEBUG Erp - select top 20 base_material.* from base_material order by no asc
2020-01-03 20:35:37,230 [6104] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:35:37,917 [10436] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:37,917 [10436] DEBUG Erp - select top 20 base_material.* from base_material order by no asc
2020-01-03 20:35:37,925 [10436] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:35:50,001 [6104] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:50,002 [6104] DEBUG Erp - select top 20 base_material.* from base_material order by no asc
2020-01-03 20:35:50,006 [6104] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:35:51,473 [10436] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:51,474 [10436] DEBUG Erp - select top 20 base_material.* from base_material order by no asc
2020-01-03 20:35:51,475 [10436] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:35:54,192 [8956] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:35:54,192 [8956] DEBUG Erp - select top 20 base_material.* from base_material order by no asc
2020-01-03 20:35:54,194 [8956] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:36:00,621 [7532] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-03 20:36:02,628 [8780] DEBUG Servicesys_organize - 获取实体列表
2020-01-03 20:36:02,629 [8780] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-03 20:36:03,011 [7968] DEBUG Servicesys_user - 获取实体列表
2020-01-03 20:36:03,012 [7968] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-03 20:36:03,037 [7968] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-03 20:38:15,933 [9584] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:38:16,165 [10436] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:38:17,037 [8780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:38:18,619 [9984] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:38:18,620 [9984] DEBUG Erp - select top 20 base_material.* from base_material order by MaterialCode
2020-01-03 20:38:18,621 [9984] ERROR Servicebase_material - 获取实体列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass42_0.<GetModelList>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:207,State:1,Class:16
2020-01-03 20:38:18,631 [9984] ERROR /api/erp/material - System.Data.SqlClient.SqlException (0x80131904): 列名 'MaterialCode' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.GetModelListWithPaging(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 35
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Get(RequestWrapper request) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 48
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:207,State:1,Class:16
2020-01-03 20:38:18,637 [8956] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:38:18,637 [8956] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:38:19,808 [10824] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:38:19,808 [10824] DEBUG Erp - select top 20 base_material.* from base_material order by price asc
2020-01-03 20:38:19,818 [10824] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:38:26,622 [7532] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:38:26,623 [7532] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:38:26,633 [7532] DEBUG Erp - select base_material.* from base_material where  no =  '201'
2020-01-03 20:38:26,648 [7532] DEBUG Erp - update base_material set [id] = '3', [name] = '胶带', [type] = '2', [price] = '1.25dd', [guige] = '10*10', [isenable] = 'true', [remark] = '123', [create_time] = '2020/1/3 20:33:58', [create_username] = '超级管理员' where  no =  '201'
2020-01-03 20:38:26,652 [7532] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:8102,State:1,Class:16
2020-01-03 20:38:26,670 [7532] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 70
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:8102,State:1,Class:16
2020-01-03 20:38:35,686 [10436] DEBUG Servicebase_material - 编辑记录
2020-01-03 20:38:35,687 [10436] DEBUG Servicebase_material - 获取动态对象
2020-01-03 20:38:35,688 [10436] DEBUG Erp - select base_material.* from base_material where  no =  '201'
2020-01-03 20:38:35,690 [10436] DEBUG Erp - update base_material set [id] = '3', [name] = '胶带', [type] = '2', [price] = '1.2', [guige] = '10*10', [isenable] = 'true', [remark] = '123', [create_time] = '2020/1/3 20:33:58', [create_username] = '超级管理员' where  no =  '201'
2020-01-03 20:38:35,692 [10436] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:8102,State:1,Class:16
2020-01-03 20:38:35,729 [10436] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 70
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:2eee60b4-fe2a-4cee-9940-a45b093c31e9
Error Number:8102,State:1,Class:16
2020-01-03 20:38:54,957 [10436] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2020-01-03 20:39:57,988 [8780] DEBUG Erp - SELECT Name as TableName FROM sys.tables order by Name
2020-01-03 20:39:58,012 [10824] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2020-01-03 20:39:59,639 [9984] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 20:46:45,640 [8580] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:46:45,680 [8580] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:46:45,689 [8580] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:46:45,689 [8580] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:46:45,699 [8580] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:46:45,711 [8580] DEBUG Erp - 
--set ANSI_NULLS ON
--set QUOTED_IDENTIFIER ON
 
-- =============================================
-- Description:	提供中文首字母
-- Demo: select * from 表 where fun_getPY(字段) like N'%zgr%'
-- =============================================
CREATE FUNCTION [dbo].[fun_getPY]
(
	@str NVARCHAR(4000)
)
RETURNS NVARCHAR(4000)
AS
BEGIN
	DECLARE @word NCHAR(1),@PY NVARCHAR(4000)
	SET @PY=''
	WHILE len(@str)>0
	BEGIN
		SET @word=left(@str,1)
		SET @PY=@PY+(CASE WHEN unicode(@word) BETWEEN 19968 AND 19968+20901
		THEN (SELECT TOP 1 PY FROM (
		SELECT 'A' AS PY,N'' AS word
		UNION ALL SELECT 'B',N'簿'
		UNION ALL SELECT 'C',N'e'
		UNION ALL SELECT 'D',N'z'
		UNION ALL SELECT 'E',N''
		UNION ALL SELECT 'F',N'v'
		UNION ALL SELECT 'G',N'B'
		UNION ALL SELECT 'H',N''
		UNION ALL SELECT 'J',N'h'
		UNION ALL SELECT 'K',N'i'
		UNION ALL SELECT 'L',N'w'
		UNION ALL SELECT 'M',N''
		UNION ALL SELECT 'N',N''
		UNION ALL SELECT 'O',N'a'
		UNION ALL SELECT 'P',N'曝'
		UNION ALL SELECT 'Q',N''
		UNION ALL SELECT 'R',N'U'
		UNION ALL SELECT 'S',N'R'
		UNION ALL SELECT 'T',N'X'
		UNION ALL SELECT 'W',N'F'
		UNION ALL SELECT 'X',N'R'
		UNION ALL SELECT 'Y',N''
		UNION ALL SELECT 'Z',N''
		) T 
		WHERE word>=@word COLLATE Chinese_PRC_CS_AS_KS_WS 
		ORDER BY PY ASC) ELSE @word END)
		SET @str=right(@str,len(@str)-1)
	END
	RETURN @PY
END
2020-01-03 20:46:45,715 [8580] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:46:46,333 [8760] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:46:50,268 [10868] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:46:50,277 [10868] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:49:39,456 [10564] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:49:40,068 [10824] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:49:40,068 [10824] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:49:56,817 [8956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:49:57,404 [10824] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:49:57,404 [10824] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:50:07,186 [9220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:50:08,135 [10496] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:50:08,135 [10496] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:50:36,277 [1308] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:50:37,154 [10496] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:50:37,154 [10496] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:50:51,048 [10496] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:50:54,259 [9984] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:51:00,236 [10496] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:51:00,869 [10140] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:51:00,869 [10140] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:51:01,121 [9984] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:51:01,123 [9984] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 20:51:01,143 [9984] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:51:05,926 [10496] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:51:05,926 [10496] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 20:51:05,927 [10496] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:51:16,405 [1308] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:51:17,150 [10564] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:51:17,150 [10564] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:51:29,107 [9220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2020-01-03 20:51:46,106 [9220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:51:48,099 [10140] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:51:48,100 [10140] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:52:02,385 [9584] DEBUG Erp - SELECT Name as TableName FROM sys.tables order by Name
2020-01-03 20:52:02,547 [10496] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2020-01-03 20:52:04,487 [9220] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 20:54:17,194 [10564] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 20:54:17,233 [9584] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 20:55:55,620 [10564] DEBUG Erp - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_material')
ORDER BY sys.columns.column_id
2020-01-03 20:55:55,626 [10564] DEBUG Erp - sp_pkeys 'base_material'
2020-01-03 20:57:21,422 [9984] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:57:23,343 [10420] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:57:23,343 [10420] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:58:19,141 [10420] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:58:19,988 [9332] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:58:19,988 [9332] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:58:21,751 [10412] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:58:22,364 [10420] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:58:22,365 [10420] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:58:33,968 [1308] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:58:34,092 [9584] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 20:58:34,306 [10420] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 20:58:35,063 [1308] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 20:58:35,807 [9584] DEBUG Servicebase_material - 获取实体列表
2020-01-03 20:58:35,807 [9584] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 20:58:35,812 [9584] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 20:58:35,830 [10420] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:58:35,830 [10420] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:59:09,736 [10284] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:59:09,774 [10284] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:59:09,782 [10284] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:59:09,783 [10284] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:59:09,790 [10284] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:59:09,791 [10284] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 20:59:10,502 [4396] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:59:15,282 [4396] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:59:15,316 [4396] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:59:18,422 [4396] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:59:23,051 [4396] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:59:23,052 [4396] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 20:59:30,211 [11176] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 20:59:35,039 [10892] DEBUG Servicebase_data - 获取动态列表
2020-01-03 20:59:35,039 [10892] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:00:22,849 [7264] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 21:00:24,821 [6792] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:00:24,821 [6792] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:01:12,145 [6792] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 21:01:15,993 [6792] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:01:15,994 [6792] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:01:26,480 [3188] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:01:27,447 [6632] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:01:31,190 [3188] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:01:33,594 [7828] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:01:33,594 [7828] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:01:33,727 [10892] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:01:33,731 [10892] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:01:33,764 [10892] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:01:36,089 [7828] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:01:36,089 [7828] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:01:36,141 [7828] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:04:17,082 [7996] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 21:04:18,663 [7996] ERROR /Erp/Material/Index - System.Web.HttpParseException (0x80004005): 在 "@" 字符后面遇到了空格或换行符。只有有效的标识符、关键字、注释、"(" 和 "{" 在代码块开头才有效，并且它们必须紧跟在 "@" 后面，中间没有空格。

   在 System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
   在 System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
   在 System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   在 System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-03 21:04:30,135 [7996] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/Material/Index','/Erp/Material')
2020-01-03 21:04:32,533 [9752] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:04:32,533 [9752] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:04:55,221 [7996] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:04:55,591 [6112] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:04:56,626 [9100] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:04:57,691 [4316] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:04:57,692 [4316] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:04:57,693 [4316] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:04:57,709 [7996] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:04:57,710 [7996] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:04:59,294 [9100] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:04:59,294 [9100] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:04:59,295 [9100] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:05:20,103 [7996] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:05:20,137 [7996] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:05:20,146 [7996] DEBUG Erp - select base_material.* from base_material where  no =  ''
2020-01-03 21:05:20,154 [7996] ERROR Servicebase_material - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'no' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass47_0.<GetDynamic>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c9ee772a-67ef-4c55-9ec0-bd8b3b057602
Error Number:207,State:1,Class:16
2020-01-03 21:05:20,169 [7996] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'no' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 115
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c9ee772a-67ef-4c55-9ec0-bd8b3b057602
Error Number:207,State:1,Class:16
2020-01-03 21:05:20,213 [7996] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 列名 'no' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 63
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:c9ee772a-67ef-4c55-9ec0-bd8b3b057602
Error Number:207,State:1,Class:16
2020-01-03 21:05:54,175 [7996] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:05:54,907 [10996] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:05:55,963 [11048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:05:57,538 [11196] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:05:57,538 [11196] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:05:57,665 [6112] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:05:57,666 [6112] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:05:57,666 [6112] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:06:01,243 [9100] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:06:01,244 [9100] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:06:01,245 [9100] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:06:10,142 [11136] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:06:10,143 [11136] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:06:10,144 [11136] DEBUG Erp - select base_material.* from base_material where  no =  ''
2020-01-03 21:06:10,148 [11136] ERROR Servicebase_material - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'no' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass47_0.<GetDynamic>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c9ee772a-67ef-4c55-9ec0-bd8b3b057602
Error Number:207,State:1,Class:16
2020-01-03 21:06:10,150 [11136] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'no' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 115
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c9ee772a-67ef-4c55-9ec0-bd8b3b057602
Error Number:207,State:1,Class:16
2020-01-03 21:06:10,159 [11136] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 列名 'no' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 63
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:c9ee772a-67ef-4c55-9ec0-bd8b3b057602
Error Number:207,State:1,Class:16
2020-01-03 21:07:08,519 [8216] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:07:08,539 [8216] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:07:08,545 [8216] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:07:08,545 [8216] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:07:08,550 [8216] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:07:08,550 [8216] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:07:09,002 [11196] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:07:11,827 [4316] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:07:22,191 [11196] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:07:23,936 [7996] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:07:23,958 [7996] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:07:24,129 [9192] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:07:24,131 [9192] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:07:24,150 [9192] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:07:25,642 [10996] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:07:25,643 [10996] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:07:25,644 [10996] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:07:34,145 [11048] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:07:34,166 [11048] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:07:34,171 [11048] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:07:34,205 [11048] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','123','4','4','true','5','超级管理员','2020/1/3 21:07:34')
2020-01-03 21:07:34,214 [11048] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:07:34,275 [11048] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:08:37,566 [11048] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:08:38,110 [10996] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:08:38,837 [9232] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:08:40,235 [9192] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:08:40,235 [9192] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:08:40,380 [8040] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:08:40,380 [8040] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:08:40,381 [8040] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:08:41,269 [10996] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:08:41,270 [10996] DEBUG Erp - select top 20 base_material.* from base_material order by name asc
2020-01-03 21:08:41,273 [10996] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:08:43,091 [9232] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:08:43,091 [9232] DEBUG Erp - select top 20 base_material.* from base_material order by name asc
2020-01-03 21:08:43,093 [9232] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:08:48,941 [9192] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:08:48,943 [9192] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:08:48,947 [9192] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:08:48,949 [9192] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','111','2','3','true','4','超级管理员','2020/1/3 21:08:48')
2020-01-03 21:08:48,969 [9192] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:08:48,985 [9192] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:09:08,436 [6112] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:09:09,090 [9192] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:09:10,089 [11048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:09:11,914 [8408] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:09:11,915 [8408] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:09:12,182 [11196] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:09:12,182 [11196] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:09:12,183 [11196] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:09:13,596 [6112] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:09:13,597 [6112] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:09:13,693 [6112] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:09:20,537 [8040] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:09:20,537 [8040] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:09:20,538 [8040] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:09:20,541 [8040] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','11','22','33','true','444','超级管理员','2020/1/3 21:09:20')
2020-01-03 21:09:20,562 [8040] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:09:20,581 [8040] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:09:34,125 [11196] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:09:34,705 [8408] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:09:35,698 [6112] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:09:37,304 [9232] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:09:37,304 [9232] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:09:37,429 [11048] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:09:37,429 [11048] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:09:37,430 [11048] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:09:39,056 [7996] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:09:39,057 [7996] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:09:39,100 [7996] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:09:44,274 [10392] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:09:44,274 [10392] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:09:44,277 [10392] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:09:44,281 [10392] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','111','22','33','true','44','超级管理员','2020/1/3 21:09:44')
2020-01-03 21:09:49,008 [11048] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:09:49,015 [11048] DEBUG Erp - select top 20 base_material.* from base_material order by name asc
2020-01-03 21:09:49,017 [11048] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:10:07,569 [10996] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:10:07,570 [10996] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:10:07,571 [10996] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:10:07,599 [10996] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:10:07,615 [10996] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:10:36,934 [636] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:10:36,935 [636] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:10:36,942 [636] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:10:36,950 [636] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:10:36,965 [636] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:10:39,440 [10880] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:10:40,177 [10392] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:10:40,178 [10392] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:10:40,407 [8040] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:10:40,407 [8040] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:10:40,408 [8040] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:10:43,406 [10880] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:10:43,407 [10880] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:10:43,410 [10880] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:11:41,390 [11048] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:11:41,391 [11048] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:11:41,396 [11048] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:11:41,403 [11048] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:11:41,424 [11048] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:11:44,725 [1100] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:11:44,725 [1100] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:11:44,730 [1100] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:11:44,743 [1100] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:11:44,758 [1100] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:11:49,674 [8408] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:11:49,674 [8408] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:11:49,675 [8408] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:11:49,677 [8408] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:11:49,702 [8408] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:11:56,213 [9232] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:11:56,213 [9232] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:11:56,214 [9232] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:11:56,216 [9232] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','1','2','3','false','4','超级管理员','2020/1/3 21:11:56')
2020-01-03 21:11:56,238 [9232] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:11:56,239 [9232] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:11:56,243 [9232] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:11:56,261 [9232] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:13:03,116 [1100] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:13:03,777 [8040] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:13:04,735 [11048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:13:05,912 [9232] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:13:05,912 [9232] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:13:06,115 [636] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:13:06,115 [636] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:13:06,116 [636] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:13:12,146 [7984] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:13:12,147 [7984] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:13:12,183 [7984] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:13:12,185 [7984] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:13:12,214 [7984] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:13:25,773 [10392] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:13:26,595 [9232] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:13:26,596 [9232] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:13:26,809 [9440] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:13:26,809 [9440] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:13:26,810 [9440] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:13:50,695 [4544] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:13:50,695 [4544] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:13:50,696 [4544] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:13:50,697 [4544] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:13:50,714 [4544] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:14:22,981 [7632] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:14:22,981 [7632] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:14:22,985 [7632] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:14:23,374 [10392] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:14:23,375 [10392] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:14:23,376 [10392] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:15:39,618 [10392] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:15:40,446 [10392] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:15:41,267 [11240] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:15:42,420 [9440] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:15:42,420 [9440] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:15:42,531 [11048] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:15:42,531 [11048] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:15:42,531 [11048] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:15:46,129 [7632] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:15:46,129 [7632] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:15:46,137 [7632] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:15:46,145 [7632] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:15:46,157 [7632] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:16:15,563 [10392] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:16:16,190 [7636] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:16:16,191 [7636] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:16:16,387 [11048] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:16,387 [11048] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:16:16,394 [11048] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:16:18,455 [8408] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:18,458 [8408] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:16:18,465 [8408] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:16:22,934 [9028] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:22,934 [9028] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by name asc
2020-01-03 21:16:22,944 [9028] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:16:24,021 [10996] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:24,022 [10996] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by name desc
2020-01-03 21:16:24,025 [10996] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:16:25,149 [8408] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:25,150 [8408] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by name asc
2020-01-03 21:16:25,160 [8408] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:16:51,740 [10392] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:16:52,128 [9232] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:16:53,052 [9028] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:16:54,995 [10912] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:16:54,995 [10912] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:16:55,061 [10996] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:55,062 [10996] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:16:55,064 [10996] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:16:57,034 [10912] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:16:57,035 [10912] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:16:57,038 [10912] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:17:02,081 [10912] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:17:02,082 [10912] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:17:02,084 [10912] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:17:02,103 [10912] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','11','22','true','3','超级管理员','2020/1/3 21:17:02')
2020-01-03 21:18:07,698 [10996] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:18:08,076 [10912] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:18:09,178 [9440] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:18:11,307 [7632] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:18:11,308 [7632] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:18:11,308 [7632] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:18:11,322 [10996] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:18:11,322 [10996] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:18:13,335 [8408] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:18:13,335 [8408] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:18:13,336 [8408] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:20:47,551 [7632] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:20:47,941 [2252] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:20:47,941 [2252] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:20:48,118 [11240] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:20:48,119 [11240] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:20:48,122 [11240] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:20:56,375 [9232] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:20:56,376 [9232] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:20:56,388 [9232] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:21:04,817 [10900] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:21:05,508 [9232] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:21:05,511 [9232] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:21:05,513 [9232] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:21:05,540 [9440] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:21:05,541 [9440] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:21:13,452 [7632] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:21:13,452 [7632] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:21:13,453 [7632] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:22:14,734 [2252] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:22:14,987 [7632] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:22:16,068 [9440] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:22:17,971 [2252] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:22:17,983 [2252] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:22:18,122 [7636] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:22:18,123 [7636] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:22:18,124 [7636] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:22:19,463 [10112] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:22:19,463 [10112] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:22:19,464 [10112] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:23:02,908 [11240] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:23:03,482 [8408] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:23:04,271 [7636] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:23:05,253 [4792] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:23:05,253 [4792] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:23:05,368 [10112] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:23:05,368 [10112] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:23:05,369 [10112] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:23:07,360 [7636] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:23:07,361 [7636] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:23:07,362 [7636] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:23:12,692 [2252] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:23:12,693 [2252] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:23:12,701 [2252] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:23:12,702 [2252] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','11','22','3','false','44','超级管理员','2020/1/3 21:23:12')
2020-01-03 21:23:12,711 [2252] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:23:12,720 [2252] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e5a112ca-9728-42c8-a03b-da40eb3f98e8
Error Number:544,State:1,Class:16
2020-01-03 21:24:27,967 [4792] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:24:28,525 [9440] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:24:29,407 [7632] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:24:32,025 [10112] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:24:32,026 [10112] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:24:32,026 [10112] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:24:32,087 [8120] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:24:32,087 [8120] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:24:33,309 [4792] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:24:33,309 [4792] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:24:33,310 [4792] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:25:02,935 [4792] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:25:03,591 [10112] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:25:04,476 [8120] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:25:05,491 [7632] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:25:05,491 [7632] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:25:05,682 [11240] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:25:05,683 [11240] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:25:05,684 [11240] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:25:07,989 [10492] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:25:07,989 [10492] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:25:07,991 [10492] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:25:33,132 [10492] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:25:33,952 [10112] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:25:34,898 [11240] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:25:36,339 [7632] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:25:36,339 [7632] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:25:36,378 [8408] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:25:36,378 [8408] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:25:36,380 [8408] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:25:38,194 [10492] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:25:38,194 [10492] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:25:38,195 [10492] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:25:44,654 [10492] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:25:44,655 [10492] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:25:44,674 [10492] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:25:44,676 [10492] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','11','22','33','true','44','超级管理员','2020/1/3 21:25:44')
2020-01-03 21:25:47,100 [10996] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:25:47,703 [7636] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:25:47,711 [7636] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:25:47,712 [7636] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:25:47,752 [8408] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:25:47,752 [8408] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:25:54,730 [9440] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:25:54,731 [9440] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:25:54,768 [9440] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:25:54,770 [9440] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:25:54,790 [9440] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:26:19,180 [9440] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:26:19,604 [10408] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:26:20,468 [4792] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:26:23,040 [2252] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:26:23,040 [2252] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:26:23,044 [6192] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:26:23,044 [6192] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:26:23,094 [2252] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:26:24,468 [8120] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:26:24,468 [8120] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:26:24,470 [8120] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:26:41,624 [7056] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:26:41,625 [7056] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:26:41,625 [7056] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:26:41,627 [7056] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','','','','false','','超级管理员','2020/1/3 21:26:41')
2020-01-03 21:26:41,668 [7056] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:34271562-6b1c-4ce1-97ee-96a08ba116d0
Error Number:544,State:1,Class:16
2020-01-03 21:26:41,691 [7056] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:34271562-6b1c-4ce1-97ee-96a08ba116d0
Error Number:544,State:1,Class:16
2020-01-03 21:31:47,904 [9536] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:31:47,904 [9536] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:31:47,925 [9536] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:31:47,928 [9536] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','','','','false','','超级管理员','2020/1/3 21:31:47')
2020-01-03 21:31:47,930 [9536] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:2b291dae-6272-49dd-8575-03fe370fb23e
Error Number:544,State:1,Class:16
2020-01-03 21:31:47,947 [9536] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:2b291dae-6272-49dd-8575-03fe370fb23e
Error Number:544,State:1,Class:16
2020-01-03 21:32:06,761 [9072] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:32:07,098 [2252] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:32:07,923 [5388] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:32:09,514 [9536] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:32:09,514 [9536] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:32:09,515 [9536] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:32:09,546 [10492] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:32:09,549 [10492] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:32:12,086 [6192] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:32:12,088 [6192] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:32:12,119 [6192] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:32:12,123 [6192] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:32:12,139 [6192] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:32:20,633 [9072] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:32:22,589 [8120] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:32:22,601 [8120] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:32:22,602 [8120] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:32:22,621 [10408] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:32:22,621 [10408] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:32:23,321 [10492] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:32:23,445 [9900] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:32:24,023 [5388] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:32:25,129 [6192] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:32:25,130 [6192] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:32:25,203 [10408] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:32:25,204 [10408] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:32:25,209 [10408] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:32:32,962 [2252] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:32:32,963 [2252] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:32:32,968 [2252] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:32:32,982 [2252] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:32:33,003 [2252] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:39:08,386 [5008] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:39:08,600 [9212] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:39:09,570 [9892] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:39:11,047 [10444] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:39:11,047 [10444] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:39:11,063 [10244] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:39:11,063 [10244] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:39:11,064 [10244] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:39:23,569 [8120] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:39:24,100 [5008] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:39:24,101 [5008] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:39:24,102 [5008] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:39:24,132 [10492] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:39:24,132 [10492] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:40:11,434 [2252] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:40:11,434 [2252] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:40:11,437 [2252] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:40:15,020 [9892] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:40:15,263 [10492] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:40:16,225 [9212] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:40:17,020 [9892] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:40:17,021 [9892] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:40:17,023 [9892] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:40:17,049 [5008] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:40:17,050 [5008] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:40:26,764 [2252] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:40:27,278 [10492] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:40:28,164 [9212] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:40:30,730 [10492] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:40:30,730 [10492] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:40:30,919 [9624] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:40:30,919 [9624] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:40:30,920 [9624] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:40:35,399 [4792] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:40:35,400 [4792] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:40:35,406 [4792] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:40:35,410 [4792] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:40:35,457 [4792] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:41:10,926 [9212] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:41:11,577 [2252] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:41:23,792 [9796] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:41:31,774 [4792] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:41:31,778 [7796] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:41:31,781 [4792] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:41:31,781 [7796] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:41:31,781 [7796] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:42:22,114 [7796] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:42:22,115 [7796] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:42:22,137 [7796] DEBUG Erp - select base_material.* from base_material
2020-01-03 21:42:22,140 [7796] ERROR Servicebase_material - 编辑记录失败
Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 24
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-03 21:42:22,172 [7796] ERROR /api/erp/material/edit - Zephyr.Data.FluentDataException: Columns or where filter have not yet been added.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 60
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2020-01-03 21:43:06,843 [3024] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:43:06,872 [3024] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:43:06,879 [3024] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:43:06,880 [3024] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:43:06,886 [3024] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:43:06,887 [3024] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 21:43:07,444 [5004] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 21:43:10,911 [10844] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 21:43:16,436 [2252] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:43:21,757 [11148] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:43:21,763 [4792] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:43:21,774 [11148] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:43:21,799 [4792] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:43:21,824 [4792] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:43:23,468 [10236] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:43:23,473 [10236] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 21:43:23,474 [10236] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 21:43:38,134 [9048] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:43:38,194 [9048] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:43:38,201 [9048] DEBUG Erp - select base_material.* from base_material where  type =  '1'
2020-01-03 21:43:38,248 [9048] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','2','','','false','','超级管理员','2020/1/3 21:43:38')
2020-01-03 21:43:38,690 [9048] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 从数据类型 nvarchar 转换为 numeric 时出错。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:abe1279d-0cab-4252-b6b2-83a69c23216d
Error Number:8114,State:5,Class:16
2020-01-03 21:43:46,704 [9048] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 从数据类型 nvarchar 转换为 numeric 时出错。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 63
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:abe1279d-0cab-4252-b6b2-83a69c23216d
Error Number:8114,State:5,Class:16
2020-01-03 21:43:56,319 [10452] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 21:43:56,926 [9048] DEBUG Servicebase_material - 获取实体列表
2020-01-03 21:43:56,927 [9048] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 21:43:56,928 [9048] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 21:43:59,654 [9460] DEBUG Servicebase_data - 获取动态列表
2020-01-03 21:43:59,655 [9460] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 21:44:11,060 [10452] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:44:11,061 [10452] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:44:11,062 [10452] DEBUG Erp - select base_material.* from base_material where  type =  '1'
2020-01-03 21:44:11,085 [10452] DEBUG Erp - update base_material set [id] = '4', [name] = '33333', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  type =  '1'
2020-01-03 21:44:11,279 [10452] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:abe1279d-0cab-4252-b6b2-83a69c23216d
Error Number:8102,State:1,Class:16
2020-01-03 21:50:15,779 [10452] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data)
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:abe1279d-0cab-4252-b6b2-83a69c23216d
Error Number:8102,State:1,Class:16
2020-01-03 21:50:31,537 [6008] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:50:31,538 [6008] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:50:31,538 [6008] DEBUG Erp - select base_material.* from base_material where  type =  '1'
2020-01-03 21:50:31,540 [6008] DEBUG Erp - update base_material set [id] = '4', [name] = '33333', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  type =  '1'
2020-01-03 21:50:31,684 [6008] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:7666dc92-41fe-465b-9d78-fbe8999a8ada
Error Number:8102,State:1,Class:16
2020-01-03 21:50:35,316 [6008] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data)
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:7666dc92-41fe-465b-9d78-fbe8999a8ada
Error Number:8102,State:1,Class:16
2020-01-03 21:52:21,375 [6008] DEBUG Servicebase_material - 编辑记录
2020-01-03 21:52:21,377 [6008] DEBUG Servicebase_material - 获取动态对象
2020-01-03 21:52:21,381 [6008] DEBUG Erp - select base_material.* from base_material where  type =  '1'
2020-01-03 21:52:21,384 [6008] DEBUG Erp - update base_material set [id] = '4', [name] = '33333', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  type =  '1'
2020-01-03 21:52:21,575 [6008] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:7666dc92-41fe-465b-9d78-fbe8999a8ada
Error Number:8102,State:1,Class:16
2020-01-03 21:52:23,276 [6008] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , RequestWrapper , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data)
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:7666dc92-41fe-465b-9d78-fbe8999a8ada
Error Number:8102,State:1,Class:16
2020-01-03 22:02:34,886 [6008] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:02:34,886 [6008] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:02:34,896 [10848] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:02:34,932 [6008] DEBUG Erp - select base_material.* from base_material where  type =  '1'
2020-01-03 22:02:34,933 [6008] DEBUG Erp - update base_material set [id] = '4', [name] = '33333', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  type =  '1'
2020-01-03 22:02:35,065 [6008] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:d8b9bf3b-6272-4516-95e4-52e1afc78b96
Error Number:8102,State:1,Class:16
2020-01-03 22:02:36,653 [6008] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data)
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:d8b9bf3b-6272-4516-95e4-52e1afc78b96
Error Number:8102,State:1,Class:16
2020-01-03 22:02:40,341 [9928] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:02:40,405 [9928] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:02:40,420 [9928] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:02:40,422 [9928] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:02:40,438 [9928] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:02:40,439 [9928] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:02:41,133 [5344] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:03:01,380 [2116] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:03:01,392 [2116] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:03:01,396 [2116] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:03:01,397 [2116] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:03:01,400 [2116] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:03:01,400 [2116] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:03:01,701 [8480] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:03:03,666 [4244] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:03:08,020 [4436] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:03:08,669 [8124] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:03:08,679 [8124] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:03:08,751 [3704] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:03:08,752 [3704] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:03:08,760 [3704] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:03:36,407 [10840] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:03:37,019 [3704] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:03:38,216 [8480] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:03:39,675 [8124] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:03:39,675 [8124] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:03:39,830 [3704] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:03:39,830 [3704] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:03:39,834 [3704] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:03:46,275 [5324] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:03:46,309 [5324] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:03:46,319 [5324] DEBUG Erp - select base_material.* from base_material where  type =  '1'
2020-01-03 22:03:46,351 [5324] DEBUG Erp - update base_material set [id] = '4', [name] = '11', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  type =  '1'
2020-01-03 22:03:46,359 [5324] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__3(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 61
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8e1ba563-ad82-4e6e-acdd-ce341fa2f6fa
Error Number:8102,State:1,Class:16
2020-01-03 22:03:46,449 [5324] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 71
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:8e1ba563-ad82-4e6e-acdd-ce341fa2f6fa
Error Number:8102,State:1,Class:16
2020-01-03 22:04:02,224 [7988] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:04:02,224 [7988] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:04:02,231 [7988] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:05:41,059 [7988] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:05:41,421 [10840] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:05:42,255 [4244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:05:43,897 [4436] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:05:43,897 [4436] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:05:43,898 [4436] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:05:43,913 [3704] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:05:43,913 [3704] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:07:02,308 [7768] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:07:02,319 [7768] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:07:02,323 [7768] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:07:02,324 [7768] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:07:02,328 [7768] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:07:02,328 [7768] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:07:02,587 [4436] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:07:04,489 [3704] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:07:13,372 [8124] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:07:15,601 [4244] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:07:15,605 [5324] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:07:15,617 [4244] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:07:15,635 [5324] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:07:15,662 [5324] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:07:20,835 [5324] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:07:20,872 [5324] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:07:20,882 [5324] DEBUG Erp - select base_material.* from base_material where  id =  '4'
2020-01-03 22:07:20,922 [5324] DEBUG Erp - update base_material set [name] = '11', [type] = '1', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  id =  '4'
2020-01-03 22:08:54,389 [7988] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:08:55,168 [8296] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:08:56,128 [4244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:08:57,771 [7988] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:08:57,771 [7988] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:08:57,790 [8124] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:08:57,790 [8124] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:08:57,791 [8124] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:09:03,779 [8036] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:09:04,183 [7988] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:09:05,075 [10840] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:09:05,832 [9184] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:09:05,832 [9184] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:09:05,983 [8296] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:09:05,984 [8296] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:09:05,984 [8296] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:09:18,162 [10840] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:09:18,901 [3704] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:09:20,035 [4436] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:09:21,415 [10636] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:09:21,415 [10636] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:09:21,643 [4244] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:09:21,644 [4244] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:09:21,647 [4244] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:09:40,585 [11184] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:09:41,071 [10840] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:09:42,122 [7988] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:09:43,453 [8944] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:09:43,454 [8944] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:09:43,587 [11184] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:09:43,587 [11184] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:09:43,588 [11184] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:10:59,235 [11184] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:10:59,444 [10840] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:11:00,107 [4244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:11:01,328 [10636] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:11:01,328 [10636] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:11:01,335 [10636] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:11:01,388 [3704] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:11:01,389 [3704] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:11:04,898 [4244] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:11:04,898 [4244] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:11:04,900 [4244] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:11:32,503 [4244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2020-01-03 22:11:32,531 [4244] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-03 22:11:32,532 [4244] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-03 22:11:34,835 [4436] DEBUG Servicemms_rentOut - 获取动态列表
2020-01-03 22:11:34,836 [4436] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MerchantsName
     from 
        mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode
     where  isnull(IsTotal,0)<>1 order by A.BillNo
2020-01-03 22:11:34,858 [4436] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MerchantsName
     from 
        mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode
     where  isnull(IsTotal,0)<>1 ) tb_temp
2020-01-03 22:11:47,962 [6796] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:11:47,988 [6796] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:11:47,994 [6796] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:11:47,994 [6796] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:11:48,001 [6796] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:11:48,001 [6796] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:11:48,445 [10840] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/Product/Index','/Mms/Product')
2020-01-03 22:11:48,476 [10840] DEBUG Servicesys_code - 获取动态列表
2020-01-03 22:11:48,485 [10840] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-03 22:11:51,380 [3704] DEBUG Servicemms_product - 获取动态列表
2020-01-03 22:11:51,380 [3704] DEBUG Mms - select top 20 * from mms_product order by ID
2020-01-03 22:11:51,391 [3704] DEBUG Mms - select count(*) from ( select * from mms_product ) tb_temp
2020-01-03 22:11:54,360 [10928] DEBUG Servicemms_product - 获取新主键
2020-01-03 22:11:54,368 [10928] DEBUG Mms - select isnull(max(ID),0) from mms_product  where 1 = 1 
2020-01-03 22:12:46,581 [10840] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:12:50,555 [10928] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:12:51,090 [11184] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:12:52,813 [10840] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:12:52,813 [10840] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:12:52,823 [3704] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:12:52,824 [3704] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:12:52,831 [3704] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:12:54,922 [4244] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:12:54,922 [4244] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:12:54,922 [4244] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:13:42,200 [3704] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:13:42,545 [8124] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:13:43,492 [10928] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:13:45,669 [8840] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:13:45,669 [8840] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:13:45,715 [4244] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:13:45,715 [4244] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:13:45,716 [4244] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:14:02,840 [3704] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:14:03,717 [10928] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:14:04,544 [9024] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:14:07,049 [8124] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:14:07,049 [8124] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:14:07,076 [10928] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:14:07,077 [10928] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:14:07,078 [10928] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:14:21,757 [11184] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:14:22,180 [10316] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:14:23,317 [7520] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:14:24,980 [5464] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:14:24,981 [5464] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:14:24,981 [5464] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:14:24,997 [8840] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:14:24,997 [8840] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:14:26,341 [11184] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:14:26,341 [11184] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:14:26,342 [11184] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:14:27,478 [8124] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:14:27,478 [8124] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:14:27,479 [8124] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:14:28,332 [988] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:14:28,332 [988] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:14:28,333 [988] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:15:13,920 [10928] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:15:14,241 [988] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:15:15,466 [10316] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:15:16,957 [3704] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:15:16,957 [3704] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:15:16,979 [8840] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:15:16,979 [8840] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:15:16,980 [8840] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:15:32,818 [8840] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:15:32,819 [8840] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:15:32,825 [8840] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:15:43,606 [10928] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:15:43,624 [10928] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:15:43,628 [10928] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:15:43,641 [10928] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','2222','','','false','','超级管理员','2020/1/3 22:15:43')
2020-01-03 22:15:43,647 [10928] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:15:43,691 [10928] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:15:49,104 [8900] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:15:49,104 [8900] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:15:49,110 [8900] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:15:49,135 [8900] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','2222','','22','false','','超级管理员','2020/1/3 22:15:49')
2020-01-03 22:15:49,139 [8900] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:15:49,153 [8900] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:15:53,091 [3704] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:15:53,092 [3704] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:15:53,130 [3704] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:15:53,142 [3704] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','2222','','22','false','33','超级管理员','2020/1/3 22:15:53')
2020-01-03 22:15:53,148 [3704] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:15:53,166 [3704] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:15:59,964 [11184] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:15:59,965 [11184] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:15:59,978 [11184] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:15:59,980 [11184] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','2222','1.00','22','false','33','超级管理员','2020/1/3 22:15:59')
2020-01-03 22:15:59,985 [11184] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:16:00,001 [11184] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:16:05,124 [11184] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:16:05,125 [11184] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:16:05,127 [11184] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:16:05,128 [11184] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','2222','1.00','22','true','33','超级管理员','2020/1/3 22:16:05')
2020-01-03 22:16:05,133 [11184] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:16:05,151 [11184] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:16:15,333 [3704] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:16:15,334 [3704] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:16:15,338 [3704] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:16:15,341 [3704] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','2222','1.00','22','true','33','超级管理员','2020/1/3 22:16:15')
2020-01-03 22:16:15,343 [3704] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:16:15,373 [3704] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b4db4f31-1027-4521-8287-a8fcb106ce20
Error Number:544,State:1,Class:16
2020-01-03 22:16:26,350 [988] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:16:27,318 [9024] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:16:27,319 [9024] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:16:27,369 [8840] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:16:27,369 [8840] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:16:27,372 [8840] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:16:29,879 [11184] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:16:29,880 [11184] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:16:29,881 [11184] DEBUG Erp - select base_material.* from base_material where  id =  '4'
2020-01-03 22:16:29,903 [11184] DEBUG Erp - update base_material set [name] = '11', [type] = '1', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  id =  '4'
2020-01-03 22:17:19,287 [9624] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:17:19,324 [9624] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:17:19,334 [9624] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:17:19,335 [9624] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:17:19,345 [9624] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:17:19,345 [9624] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-03 22:17:20,226 [6320] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:17:22,197 [1348] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:18:39,660 [5956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:18:45,690 [3684] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:18:45,716 [3684] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:18:45,735 [9736] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:18:45,738 [9736] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:18:45,768 [9736] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:18:56,476 [9736] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:18:56,633 [9736] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:18:56,657 [9736] DEBUG Erp - select base_material.* from base_material where  id =  '4'
2020-01-03 22:18:56,699 [9736] DEBUG Erp - update base_material set [name] = '11', [type] = '1', [price] = '22', [guige] = '33', [isenable] = 'true', [remark] = '44', [create_time] = '2020/1/3 21:25:44', [create_username] = '超级管理员' where  id =  '4'
2020-01-03 22:19:00,533 [8744] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:19:00,563 [8744] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:19:00,565 [8744] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:19:25,201 [8744] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:19:25,202 [8744] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:19:25,203 [8744] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:19:25,222 [8744] DEBUG Erp - insert into base_material([type],[id],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','','22','3.00','3','true','23','超级管理员','2020/1/3 22:19:25')
2020-01-03 22:19:25,442 [8744] ERROR Servicebase_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__4(RequestWrapper x) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 62
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 119
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:3d036b2a-2077-450a-9809-7ff5e74f6861
Error Number:544,State:1,Class:16
2020-01-03 22:21:06,939 [8744] ERROR /api/erp/material/edit - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'base_material' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , base_materialService , Object , RequestWrapper , Object )
   在 ERP.Web.Areas.Erp.Controllers.MaterialApiController.Edit(Object data) 位置 D:\Project\Code\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\MaterialController.cs:行号 62
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:3d036b2a-2077-450a-9809-7ff5e74f6861
Error Number:544,State:1,Class:16
2020-01-03 22:24:43,376 [6456] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-03 22:24:43,775 [8768] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-03 22:24:44,782 [5748] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 22:24:47,911 [10896] DEBUG Servicebase_data - 获取动态列表
2020-01-03 22:24:47,912 [10896] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 22:24:47,961 [2788] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:24:47,961 [2788] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 22:24:47,963 [2788] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 22:24:52,143 [6456] DEBUG Servicebase_material - 获取实体列表
2020-01-03 22:24:52,143 [6456] DEBUG Erp - select top 20 base_material.* from base_material where  type =  '1' order by id
2020-01-03 22:24:52,173 [6456] DEBUG Erp - select count(*) from ( select base_material.* from base_material where  type =  '1' ) tb_temp
2020-01-03 22:25:03,424 [8784] DEBUG Servicebase_material - 编辑记录
2020-01-03 22:25:03,424 [8784] DEBUG Servicebase_material - 获取动态对象
2020-01-03 22:25:03,424 [8784] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 22:25:03,425 [8784] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','333','4.00','5','true','5','超级管理员','2020/1/3 22:25:03')
2020-01-03 23:04:12,337 [1568] DEBUG Servicebase_material - 编辑记录
2020-01-03 23:04:12,338 [1568] DEBUG Servicebase_material - 获取动态对象
2020-01-03 23:04:12,406 [1568] DEBUG Erp - select base_material.* from base_material where  id =  ''
2020-01-03 23:04:12,408 [1568] DEBUG Erp - insert into base_material([type],[name],[price],[guige],[isenable],[remark],[create_username],[create_time]) values('1','33','4.00','5','false','1','超级管理员','2020/1/3 23:04:12')
2020-01-03 23:04:16,045 [7892] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 23:04:16,876 [8556] DEBUG Servicebase_material - 获取实体列表
2020-01-03 23:04:16,891 [10880] DEBUG Servicebase_data - 获取动态列表
2020-01-03 23:04:16,898 [8556] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 23:04:16,898 [10880] DEBUG Erp - select base_data.* from base_data order by type
2020-01-03 23:04:16,899 [8556] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 23:04:27,150 [9860] DEBUG Servicebase_material - 编辑记录
2020-01-03 23:04:27,151 [9860] DEBUG Servicebase_material - 获取动态对象
2020-01-03 23:04:27,158 [9860] DEBUG Erp - select base_material.* from base_material where  id =  '7'
2020-01-03 23:04:27,165 [9860] DEBUG Erp - update base_material set [name] = '33', [type] = '1', [price] = '4', [guige] = '5', [isenable] = 'true', [remark] = '1', [create_time] = '2020/1/3 23:04:12', [create_username] = '超级管理员' where  id =  '7'
2020-01-03 23:04:38,359 [7892] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/material/Index','/Erp/material')
2020-01-03 23:04:39,089 [8556] DEBUG Servicebase_material - 获取实体列表
2020-01-03 23:04:39,089 [8556] DEBUG Erp - select top 20 base_material.* from base_material order by id
2020-01-03 23:04:39,091 [8556] DEBUG Erp - select count(*) from ( select base_material.* from base_material ) tb_temp
2020-01-03 23:04:39,148 [10880] DEBUG Servicebase_data - 获取动态列表
2020-01-03 23:04:39,148 [10880] DEBUG Erp - select base_data.* from base_data order by type
